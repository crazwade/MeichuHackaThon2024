import{t as I,d as _,r as j,o,c as m,a as t,b as z,e as p,f as d,g,h as D,i as v,j as L,F as b,k as C,u as y,n as B,l as R,m as V}from"./index-BrarLA4E.js";import{g as $,L as F}from"./LoadingDialog-BqsNtsnD.js";async function M(u){try{const e=await new Promise((a,n)=>{setTimeout(()=>{a(N)},1500)});return I({code:"0001",msg:"success",data:e})}catch(e){throw console.error("Error fetching fuzzy search list:",e),new Error("Failed to fetch fuzzy search list")}}const N=[{id:1,destination:"城隍廟前廣場",location:"國立陽明交通大學體育館",costTime:"35m",arrivalTime:"09:04",transportComp:{公車:84,Bike:0,步行:16,共乘:0},crowding:0,path_details:[{location:{gps:{lat:"120.99573786220625",lng:"24.788946082114585"},name:"國立陽明交通大學體育館"},destination:{gps:{lat:"120.99754927480843",lng:"24.796508074536952"},name:"清華大學"},costTime:"16分",arrivalTime:"08:00",transport:{type:"步行",remark:"步行"},crowding:2},{location:{gps:{lat:"120.99754927480843",lng:"24.796508074536952"},name:"清華大學"},destination:{gps:{lat:" 120.97101060750855",lng:"24.803320896069028"},name:"新竹火車站(中正路)"},costTime:"11分",arrivalTime:"08:13",transport:{type:"公車",remark:"5608"},crowding:4},{location:{gps:{lat:" 120.97101060750855",lng:"24.803320896069028"},name:"新竹火車站(中正路)"},destination:{gps:{lat:" 120.96593168750877",lng:"24.80445711912709"},name:"新竹都城隍廟"},costTime:"8分",arrivalTime:"08:13",transport:{type:"步行",remark:"步行"},crowding:4}]},{id:2,destination:"城隍廟前廣場",location:"國立陽明交通大學體育館",costTime:"42m",arrivalTime:"09:04",transportComp:{公車:90,Bike:0,步行:10,共乘:0},crowding:0,path_details:[{location:{gps:{lat:"120.99573786220625",lng:"24.788946082114585"},name:"國立陽明交通大學體育館"},destination:{gps:{lat:"120.99941877283285",lng:"24.788299026754014"},name:"交大光復校區"},costTime:"7分",arrivalTime:"08:00",transport:{type:"步行",remark:"步行"},crowding:2},{location:{gps:{lat:"120.99941877283285",lng:"24.788299026754014"},name:"交大光復校區"},destination:{gps:{lat:"120.96933763923636",lng:"24.80548842304441"},name:"東門市場"},costTime:"28分",arrivalTime:"08:13",transport:{type:"公車",remark:"2A經建功高中"},crowding:4},{location:{gps:{lat:"120.96933763923636",lng:"24.80548842304441"},name:"東門市場"},destination:{gps:{lat:"120.96597468181294",lng:"24.805040672214925"},name:"城隍廟前廣場"},costTime:"7分",arrivalTime:"08:23",transport:{type:"步行",remark:"步行"},crowding:1}]},{id:3,destination:"城隍廟前廣場",location:"國立陽明交通大學體育館",costTime:"51m",arrivalTime:"09:04",transportComp:{公車:0,Bike:20,步行:53,共乘:27},crowding:0,path_details:[{location:{gps:{lat:"120.99573786220625",lng:"24.788946082114585"},name:"國立陽明交通大學體育館"},destination:{gps:{lat:"120.99939195216426",lng:"24.788310883357507"},name:"交大光復校區"},costTime:"7分",arrivalTime:"08:00",transport:{type:"步行",remark:"步行"},crowding:2},{location:{gps:{lat:"120.99939195216426",lng:"24.788310883357507"},name:"交大光復校區"},destination:{gps:{lat:"121.00240561038945",lng:"24.79267822031121"},name:"陽明交大光復路(過溝)"},costTime:"14分",arrivalTime:"08:23",transport:{type:"步行",remark:"步行"},crowding:1},{location:{gps:{lat:"121.00240561038945",lng:"24.79267822031121"},name:"陽明交大光復路(過溝)"},destination:{gps:{lat:"120.98310352069274",lng:"24.802410321639847"},name:"食品路口"},costTime:"14分",arrivalTime:"08:23",transport:{type:"共乘",remark:"動物園線"},crowding:1},{location:{gps:{lat:"120.98310352069274",lng:"24.802410321639847"},name:"食品路口"},destination:{gps:{lat:"120.98096502386976",lng:"24.800197579066086"},name:"YouBike 新竹動物園"},costTime:"6分",arrivalTime:"08:23",transport:{type:"步行",remark:"步行"},crowding:1},{location:{gps:{lat:"120.98096502386976",lng:"24.800197579066086"},name:"YouBike 新竹動物園"},destination:{gps:{lat:"120.96599065443802",lng:"24.80477590112634"},name:"城隍廟前廣場"},costTime:"10分",arrivalTime:"08:23",transport:{type:"Bike",remark:"新竹動物園站"},crowding:1}]}],q={class:"w-full cursor-pointer bg-gray-800 hover:bg-gray-900 text-white py-3 px-2 font-bold text-3xl text-center select-none"},Y=["for"],A={class:"inline"},G={class:"flex gap-4 text-xl px-4 pb-4 pt-2"},H={class:"flex gap-1 justify-center items-center"},J={class:"flex justify-center items-center"},K={class:"flex gap-1 justify-center items-center"},O={class:"flex justify-center items-center"},Q={class:"flex gap-1 justify-center items-center"},U={class:"flex justify-center items-center"},W={class:"flex gap-1 justify-center items-center"},X={class:"flex justify-center items-center"},Z=_({__name:"PathCard",props:{path:{}},setup(u){return(e,a)=>{const n=j("font-awesome-icon");return o(),m("div",q,[t("label",{for:e.path.id.toString()},[z(e.$slots,"content",{},()=>[p(n,{icon:["fa","clock"],class:"text-2xl"}),t("h3",A,d(e.path.costTime),1),a[4]||(a[4]=t("hr",{class:"border-white rounded-full py-2"},null,-1)),t("div",G,[t("div",H,[p(n,{icon:["fas","shoe-prints"]}),t("span",J,[t("div",null,d(e.path.transportComp.步行),1),a[0]||(a[0]=t("div",null,"%",-1))])]),t("div",K,[p(n,{icon:["fas","bicycle"]}),t("span",O,[t("div",null,d(e.path.transportComp.Bike),1),a[1]||(a[1]=t("div",null,"%",-1))])]),t("div",Q,[p(n,{icon:["fas","bus"]}),t("span",U,[t("div",null,d(e.path.transportComp.公車),1),a[2]||(a[2]=t("div",null,"%",-1))])]),t("div",W,[p(n,{icon:["fas","car-side"]}),t("span",X,[t("div",null,d(e.path.transportComp.共乘??0),1),a[3]||(a[3]=t("div",null,"%",-1))])])])])],8,Y)])}}}),tt=_({__name:"Icon",props:{trasportType:{}},setup(u){return(e,a)=>{const n=j("font-awesome-icon");return o(),m("span",null,[e.trasportType==="公車"?(o(),g(n,{key:0,icon:["fas","bus"]})):e.trasportType==="Bike"?(o(),g(n,{key:1,icon:["fas","bicycle"]})):e.trasportType==="步行"?(o(),g(n,{key:2,icon:["fas","shoe-prints"]})):e.trasportType==="共乘"?(o(),g(n,{key:3,icon:["fas","car-side"]})):D("",!0)])}}}),et={class:"w-[90%] rounded-lg bg-[rgb(71,85,105,0.9)] text-white font-bold text-[length:inherit] text-center mx-auto px-2 py-1 my-1"},at={class:"flex items-center gap-2 max-w-full py-1"},nt={class:"text-2xl text-nowrap"},st={class:"text-2xl ml-auto"},ot=_({__name:"PDetail",props:{detail:{}},setup(u){return console.log(u.detail),(e,a)=>(o(),m("div",et,[t("div",at,[p(tt,{"trasport-type":e.detail.transport.type},null,8,["trasport-type"]),t("span",nt,d(e.detail.transport.remark),1),t("span",st,d(e.detail.costTime),1)])]))}}),it={class:"flex relative bg-gray-800"},lt={class:"h-auto z-10 relative"},rt={class:"h-[100dvh] overflow-y-auto list-none flex flex-col"},ct=["onClick"],pt={role:"menuitem"},gt=_({__name:"PathSelectPage",setup(u){const e=R(),a=V(),n=v([]),r=v(-1),w=v(null),f=v(0),k=v(!1),E=i=>{var s;if(r.value===i){r.value=-1;return}r.value=i;const c=n.value.filter(l=>l.id===i)[0];if(c){let l=[{lat:c.path_details[0].location.gps.lat,lng:c.path_details[0].location.gps.lng}];const S=c.path_details.map(x=>({lng:x.destination.gps.lng,lat:x.destination.gps.lat})),h=document.createElement("div"),T=document.getElementById(`map${f.value}`);T&&T.remove(),f.value=Date.now(),h.id="map"+f.value.toString(),(s=w.value)==null||s.appendChild(h),document.getElementById(h.id).style.height="100dvh",document.getElementById(h.id).style.width="100dvw",$([...l,...S],h.id)}},P=()=>{r.value!==-1&&a.push({name:"PathPage",query:{id:r.value}})};return L(async()=>{var l;k.value=!0,e.query;const i=await M();n.value=i.data,console.log(i.data);const c=[{lng:i.data[0].path_details[0].location.gps.lng,lat:i.data[0].path_details[0].location.gps.lat}],s=document.createElement("div");f.value=Date.now(),s.id="map"+f.value.toString(),(l=w.value)==null||l.appendChild(s),document.getElementById(s.id).style.height="100dvh",document.getElementById(s.id).style.width="100dvw",$(c,s.id),k.value=!1}),(i,c)=>(o(),m("div",it,[t("nav",lt,[t("ul",rt,[(o(!0),m(b,null,C(y(n),s=>(o(),m("li",{key:s.id,class:"w-full border-b-2 border-white border-dashed bg-gray-400"},[t("div",{onClick:l=>E(s.id)},[p(Z,{path:s},null,8,["path"]),t("ul",{role:"menu",class:B([y(r)===s.id?"h-auto opacity-100":"hidden"])},[t("li",pt,[(o(!0),m(b,null,C(s.path_details,l=>(o(),g(ot,{detail:l},null,8,["detail"]))),256))])],2)],8,ct)]))),128))]),t("div",{class:B(["absolute bottom-0 w-full h-fit py-3 cursor-pointer flex justify-center items-center text-2xl text-white font-extrabold",[y(r)===-1?"bg-gray-600 cursor-not-allowed":"bg-green-600 hover:bg-green-800"]]),onClick:P}," 選擇 ",2)]),t("div",{ref_key:"mapRef",ref:w,class:"w-full h-full bg-gray-400 relative"},null,512),y(k)?(o(),g(F,{key:0})):D("",!0)]))}});export{gt as default};
